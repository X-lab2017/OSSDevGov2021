# 项目CI/CD的流程调研
在大型的开源项目中，会有很多其他的大量的开发者向该项目提交Pull Request或者push代码。项目的核心维护者如果每次都需要对合并的代码进行code review显然耗时耗力，几乎无法实现。因此许多团队都会指定一套代码规范, 然后编写测试用例严格的检查每次代码修改， 这样能够非常有效的减少后期代码维护的成本。
现如今，基于Github Action我们可以自动化的完成代码的 CI/CD 工作流。基于它可以进行构建、测试、打包、部署项目。
## CI (Continuous integration) 持续集成
持续集成指的是，频繁地（一天多次）将代码集成到主干。 持续集成可以做到每完成一点更新，就集成到主干，可以快速发现错误，定位错误也比较容易。其次持续集成可以做到防止分支大幅偏离主干。如果不是经常集成，主干又在不断更新，会导致以后集成的难度变大，甚至难以集成。

持续集成的目的，就是让产品可以快速迭代，同时还能保持高质量。它的核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。

## CD（Continuous delivery)持续交付
持续交付指的是，频繁地将软件的新版本，交付给质量团队或者用户，以供评审。如果评审通过，代码就进入生产阶段。 持续交付可以看作持续集成的下一步。它强调的是，不管怎么更新，软件是随时随地可以交付的。
## Vue项目的CI/CD流程
Vue作为大型的开源项目，定义了自己的CI/CD流程，详细信息请见 .circleci/ config.yml,根据circleci描述的持续集成的设计，代码从提交到生产，整个过程有以下几步。
### 提交
流程的第一步，是开发者向代码仓库提交代码。所有后面的步骤都始于本地代码的一次提交（commit）。
### 测试（第一轮）
代码仓库对commit操作配置了钩子（hook），只要提交代码或者合并进主干，就会跑自动化测试。 vue需要的测试类型有：
#### test-cover:
针对函数或模块的测试
#### test-e2e:
端对端测试：从用户界面直达数据库的全链路测试
#### test-ssr-weex
### trigger-regression-test

### 构建
通过第一轮测试，代码就可以合并进主干，就算可以交付了。 交付后，就先进行构建（build），再进入第二轮测试。所谓构建，指的是将源码转换为可以运行的实际代码，比如安装依赖，配置各种资源（样式表、JS脚本、图片）等等。 常用的构建工具如下。

Jenkins
Travis
Codeship
Strider
### 测试（第二轮）
构建完成，就要进行第二轮测试。如果第一轮已经涵盖了所有测试内容，第二轮可以省略.
### 部署
通过了第二轮测试，当前代码就是一个可以直接部署的版本（artifact）。将这个版本的所有文件打包（ tar filename.tar * ）存档，发到生产服务器。
### 回滚
一旦当前版本发生问题，就要回滚到上一个版本的构建结果。最简单的做法就是修改一下符号链接，指向上一个版本的目录。